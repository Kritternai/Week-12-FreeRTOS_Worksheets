# Lab 1: Single Task vs Multitasking Demo

## ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏∞‡∏ö‡∏ö Single Task ‡∏Å‡∏±‡∏ö Multitasking ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á

## ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

### üíª Code Files
- `main/single_task.c` - ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏ö‡∏ö Single Task
- `main/multitask.c` - ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏ö‡∏ö Multitasking
- `main/CMakeLists.txt` - Configuration ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞ compile

### üìö Documentation Files
- [`BUILD_AND_FLASH.md`](BUILD_AND_FLASH.md) - üî® **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Build ‡πÅ‡∏•‡∏∞ Flash (idf.py)**
- [`WIRING_GUIDE.md`](WIRING_GUIDE.md) - üîå **‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**
- [`CIRCUIT_DIAGRAM.md`](CIRCUIT_DIAGRAM.md) - üé® **Diagram ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö**
- [`WOKWI_SIMULATION.md`](WOKWI_SIMULATION.md) - üéÆ **‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ Wokwi Online Simulator**
- `diagram.json` - üîß **Wokwi Circuit File (import ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)**

## ‚ö†Ô∏è ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°: ‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢ Hardware

**‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô:** [`WIRING_GUIDE.md`](WIRING_GUIDE.md)

### ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏™‡∏£‡∏∏‡∏õ:
```
GPIO2 ‚îÄ‚îÄ‚Üí [220Œ© Resistor] ‚îÄ‚îÄ‚Üí LED1 (+) ‚îÄ‚îÄ‚Üí LED1 (-) ‚îÄ‚îÄ‚Üí GND
GPIO4 ‚îÄ‚îÄ‚Üí [220Œ© Resistor] ‚îÄ‚îÄ‚Üí LED2 (+) ‚îÄ‚îÄ‚Üí LED2 (-) ‚îÄ‚îÄ‚Üí GND
GPIO0 ‚îÄ‚îÄ‚Üí ‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏° BOOT ‡∏ö‡∏ô ESP32 (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°)
```

### üåê ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ö‡∏ô Wokwi (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Hardware!)

**‡πÑ‡∏°‡πà‡∏°‡∏µ ESP32 ‡∏à‡∏£‡∏¥‡∏á?** ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£! ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÑ‡∏î‡πâ:

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://wokwi.com
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á ESP32 project ‡πÉ‡∏´‡∏°‡πà
3. Import ‡πÑ‡∏ü‡∏•‡πå `diagram.json` ‡∏à‡∏≤‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ
4. Copy code ‡∏à‡∏≤‡∏Å `main/single_task.c` ‡∏´‡∏£‡∏∑‡∏≠ `main/multitask.c`
5. ‡∏Å‡∏î Start Simulation!

üëâ **‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:** ‡∏≠‡πà‡∏≤‡∏ô [`WOKWI_SIMULATION.md`](WOKWI_SIMULATION.md)

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Single Task System
1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `main/CMakeLists.txt`:
   ```cmake
   idf_component_register(SRCS "single_task.c" INCLUDE_DIRS ".")
   ```

2. Build ‡πÅ‡∏•‡∏∞ Flash:
   ```bash
   idf.py build
   idf.py flash monitor
   ```

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Multitasking System
1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `main/CMakeLists.txt`:
   ```cmake
   idf_component_register(SRCS "multitask.c" INCLUDE_DIRS ".")
   ```

2. Build ‡πÅ‡∏•‡∏∞ Flash:
   ```bash
   idf.py build
   idf.py flash monitor
   ```

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### Single Task System
- ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á LED ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö
- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° (GPIO0) ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° (‡∏≠‡∏≤‡∏à‡∏ä‡πâ‡∏≤‡∏°‡∏≤‡∏Å 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

### Multitasking System
- ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á LED ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° (GPIO0) ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á
- ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö Single Task (‡∏Ñ‡∏ß‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô < 100ms)

## ‡∏û‡∏¥‡∏ô GPIO ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
- LED1: GPIO2 (Sensor simulation)
- LED2: GPIO4 (Actuator simulation)
- Button: GPIO0 (Emergency response test)

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå

1. ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
2. ‡πÉ‡∏ô Single Task System ‡∏á‡∏≤‡∏ô‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤?
3. ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á Multitasking System ‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
4. ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ç‡∏≠‡∏á Multitasking System ‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
5. ‡∏ó‡∏≥‡πÑ‡∏° Emergency Task ‡∏à‡∏∂‡∏á‡∏°‡∏µ Priority ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (Priority 5)?

## ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

| ‡∏£‡∏∞‡∏ö‡∏ö | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° | ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô LED | CPU Utilization |
|------|-------------------|---------------|-----------------|
| Single Task | 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ | ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö | 100% (blocking) |
| Multitasking | < 100ms | ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô | ‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ä‡πâ |

## ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
- ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö Single Task ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå
- ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ç‡∏≠‡∏á Multitasking ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á
- ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Priority ‡πÉ‡∏ô FreeRTOS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
- ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ vTaskDelay() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ task ‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢

## ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
45 ‡∏ô‡∏≤‡∏ó‡∏µ

